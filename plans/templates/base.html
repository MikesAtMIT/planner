{% load staticfiles %}

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block custommeta %}{% endblock %}
    <title>Planner</title>
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap-datepicker-1.4.0-dist/css/bootstrap-datepicker.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}" />
    {% block customcss %}{% endblock %}
    <script src="{% static 'vendor/jquery.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap-datepicker-1.4.0-dist/js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'vendor/moment.min.js' %}"></script>
    <script src="{% static 'js/base.js' %}"></script>
    {% block customjs %}{% endblock %}
  </head>
  <body role="document">
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{% url 'plans.views.index' %}">Planner</a>
        </div>
        <div class="navbar-collapse collapse" style="height: 1px;">
          <ul class="nav navbar-nav">
            <li>
              <a nohref id="choose-filters">Choose Filters</a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              {% if user.is_authenticated %}
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ user }} <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  </a></li>
                  <li><a href="{% url 'django.contrib.auth.views.password_change' %}">Change password</a></li>
                  {% if user.is_superuser %}
                    <li class="divider"></li>
                    <li><a href="{% url 'admin:index' %}">Admin</a></li>
                  {% endif %}
                  <li class="divider"></li>
                  <li><a href="{% url 'django.contrib.auth.views.logout' %}">Sign out</a></li>
                </ul>
              {% else %}
                <a href="{% url 'django.contrib.auth.views.login' %}">Sign in</a>
              {% endif %}
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div id="main">
      <div class="container">
        <div id="content">
          {% block content %}{% endblock %}
        </div>
      </div>
      <div class="modal" id="filter-modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <form method="get" id="filter-form">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Filter items to display</h4>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="form-group col-xs-6">
                    <label for="start-date">Start Date</label>
                    <input type="text" class="form-control" id="start-date" placeholder="From" />
                    <input type="hidden" name="start-date" id="start-date-hidden" />
                  </div>
                  <div class="form-group col-xs-6">
                    <label for="end-date">End Date</label>
                    <input type="text" class="form-control" id="end-date" placeholder="To" />
                    <input type="hidden" name="end-date" id="end-date-hidden" />
                  </div>
                </div>
                <div class="row">
                  <div class="form-group col-xs-4">
                    <label for="filter-users">Users</label>
                    ( <a id="select-all-users">All</a> / <a id="deselect-all-users">None</a> )
                    {% for u in all_users %}
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" class="user-checkbox" data-id="{{ u.id }}" 
                            {% if u == user %}
                              checked="checked"
                            {% endif %}
                          />
                          {{ u }}
                        </label>
                      </div>
                    {% endfor %}
                  </div>
                  <div class="form-group col-xs-8">
                    <label for="filter-projects">Projects</label>
                    ( <a id="select-all-projects">All</a> / <a id="deselect-all-projects">None</a> )
                    {% for project in all_projects %}
                      <div class="checkbox project-checkbox" data-contributors="{{ project.contributor_id_list }}">
                        <label>
                          <input type="checkbox" name="projects" value="{{ project.id }}" />
                          {{ project.name }}
                        </label>
                      </div>
                    {% endfor %}
                  </div>
                </div>
                <div>
                  <small>*If no projects are selected, all your projects will be loaded by default.</small>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" id="apply-filters">Apply</button>
              </div>
            </form>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal #filter-modal -->
    </div>
  </body>
</html>